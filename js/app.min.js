(function(){"use strict";var data=localStorage.getItem("data");var form=document.querySelector("form");function populateForm(data){if(!data)return;data=JSON.parse(data);for(var field in data){switch(field){case"superheroes":data[field].forEach((function(superhero){document.querySelector("[name='"+superhero+"']").checked=true}));break;case"tos":var savedValue=data[field];Array.from(document.querySelectorAll("[name='"+field+"']")).filter((function(field){return field.value===savedValue}))[0].checked=true;break;default:document.querySelector("[name='"+field+"']").value=data[field]}}}function getValue(field){var value=field.type==="checkbox"?[]:"";switch(field.type){case"radio":value+=document.querySelector("[name='"+field.getAttribute("name")+"']:checked").value;break;case"checkbox":var checked=Array.from(field.closest("div").querySelectorAll(":checked"));checked.forEach((function(checkbox){value.push(checkbox.getAttribute("name"))}));break;default:value=field.value}return value}function addToLocalStorageObject(name,key,value){var existing=localStorage.getItem(name);existing=existing?JSON.parse(existing):{};existing[key]=value;localStorage.setItem(name,JSON.stringify(existing))}function saveData(event){var fieldName=event.target.getAttribute("name");var value;if(!fieldName)return;value=getValue(event.target);fieldName=Array.isArray(value)?"superheroes":fieldName;addToLocalStorageObject("data",fieldName,value)}function clearData(event){localStorage.removeItem("data")}populateForm(data);form.addEventListener("input",saveData,false);form.addEventListener("submit",clearData,false)})();